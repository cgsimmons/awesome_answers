<h1><%= @question.title %></h1>

<p><%= @question.body %></p>

<p>
  Created By:  <%= @question.user_full_name %>
</p>

<% if can? :manage, @question %>
  <div>
  <%= link_to 'Edit', edit_question_path(@question)%>
  <%= link_to 'Delete', question_path(@question),
                        method: :delete,
                        data: {confirm: 'Are you sure?'}%>
  </div>
<% end %>

<% if user_signed_in? && can?(:like, @question)%>
  <% if @like.present? %>
    <%= link_to "Un-Like", like_path(@like), method: :delete %>
  <% else %>
    <%= link_to "Like", question_likes_path(@question), method: :post %>
  <% end %>
<% end %>
(<%= pluralize @question.likes.count, "like" %>)

<div class="errors"><%= @answer.errors.full_messages.join(', ') %></div>
<%= form_for [@question, @answer] do |f| %>
  <div>
    <%= f.label :body %>
    <%= f.text_area :body %>
  </div>
  <%= f.submit %>
<% end %>
<h2>Answers</h2>
<% @question.answers.each do |ans| %>
  <%= ans.body %>
  <% if can? :delete, ans  %>
    <%= link_to 'Delete', answer_path(ans),
                          method: :delete,
                          data: {confirm: 'Are you sure?'}%>
  <% end %>
  <hr>
  <% end %>
