<div class="row">
  <div class="col-xs-2 col-sm-1">
    <div class="vote-widget">
      <%= upvote_link @question %>
      <h2><%= @question.vote_value %></h2>
      <%= downvote_link @question %>
    </div>
  </div>

  <div class="col-xs-10 col-sm-11 question-show">

    <h1><%= @question.title %></h1>

    <p><%= @question.body %></p>

    <p>
      Created By:  <%= @question.user_full_name %>
    </p>

    <% if can? :manage, @question %>
      <div>
      <%= link_to 'Edit', edit_question_path(@question)%>
      <%= link_to 'Delete', question_path(@question),
                            method: :delete,
                            data: {confirm: 'Are you sure?'}%>
      </div>
    <% end %>

    <% if user_signed_in? && can?(:like, @question)%>
      <% if @like.present? %>
        <%= link_to "Un-Like", like_path(@like), method: :delete %>
      <% else %>
        <%= link_to "Like", question_likes_path(@question), method: :post %>
      <% end %>
    <% end %>
    (<%= pluralize @question.likes.count, "like" %>)



    <section class="tag-widget">
      Tags: <%= @question.tags.map(&:name).join(", ") %>
    </section>

  </div>
</div>
<hr/>
<div class="row">
  <%= @answer.errors.full_messages.join(', ') %>
  <div class="col-xs-12">
    <%= form_for [@question, @answer] do |f| %>
      <div>
        <%= f.label :body %>
        <%= f.text_area :body, class: "form-control" %>
      </div>
      <%= f.submit class: "btn btn-default"%>
    <% end %>
    <hr/>
  </div>
  <% @question.answers.each do |ans| %>
    <div class="col-xs-12">
      <div class="col-xs-11">
        <%= ans.body %>
      </div>
      <div class="col-xs-1">
        <% if can? :delete, ans  %>
          <%= link_to answer_path(ans),
                                method: :delete,
                                data: {confirm: 'Are you sure?'},
                                class: "pull-right" do %>
          <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
          <% end %>
        <% end %>
      </div>
      <hr>
    </div>
  <% end %>
</div>
